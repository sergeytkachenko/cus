module.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var l=t[r]={i:r,l:!1,exports:{}};return e[r].call(l.exports,l,l.exports,n),l.l=!0,l.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var l in e)n.d(r,l,function(t){return e[t]}.bind(null,l));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1);t.default={generateUniqueSelector(e,t=window,n=[]){const l=r.default.generateUnique(e,t);return l?function(e,t){return t.forEach(t=>{e=e.replace(new RegExp(t,"g"),"")}),e}(l,n):null}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r{static generateUnique(e,t=window){if(!(e instanceof t.Element))return;const n=[];let l=e;for(;l.nodeType===Node.ELEMENT_NODE;){let o=l.nodeName.toLowerCase(),i=r._getIdSelector(l),c=r._getClassesSelector(l),s=r._getAttributesSelector(l),u=r._getChildSelector(l),a=`${r._getSiblingSelector(l,t)}${o}${i}${c}${s}${u}`,f=r._concatSelectors(n,i);if(r._checkOnlyOneExistEl(f,e,t))return f;let _=r._concatSelectors(n,c);if(r._checkOnlyOneExistEl(_,e,t))return _;let d=r._concatSelectors(n,s);if(r._checkOnlyOneExistEl(d,e,t))return d;let E=r._concatSelectors(n,a);if(r._checkOnlyOneExistEl(E,e,t))return E;if("body"===o){const n=r._generateUniqueByPrev(e,t);if(n)return n}n.unshift(a),l=l.parentNode}return n.join(" > ")}static _concatSelectors(e,t){let n=e.join(" > ");return n&&t?`${t} > ${n}`:t}static _generateUniqueByPrev(e,t){let n=e.previousElementSibling;const l=[];for(;n&&n.nodeType===Node.ELEMENT_NODE;){let e=r._getPrevUnique(n.nextElementSibling,t);if(e)return l.unshift(e),l.join(" + ");let o=n.nodeName.toLowerCase(),i=r._getIdSelector(n),c=r._getClassesSelector(n),s=r._getAttributesSelector(n);const u=i||c||s||o;l.unshift(u),n=n.previousElementSibling}return null}static _getPrevUnique(e,t){const n=e.previousElementSibling;if(!n||n.nodeType!==Node.ELEMENT_NODE)return null;let l=e.nodeName.toLowerCase(),o=r._getIdSelector(e),i=r._getClassesSelector(e),c=r._getAttributesSelector(e);const s=o||i||c||l;let u=r._generateUnique(n,t),a=`${u} + ${s}`;if(u&&r._checkOnlyOneExistEl(a,e,t))return a;const f=`${l}${o}${i}${c}`;return r._checkOnlyOneExistEl(f,e,t)?f:null}static _generateUnique(e,t){if(!(e instanceof t.Element))return;const n=[];let l=e;for(;l.nodeType===Node.ELEMENT_NODE;){let o=l.nodeName.toLowerCase(),i=r._getIdSelector(l),c=r._getClassesSelector(l),s=r._getAttributesSelector(l),u=`${o}${i}${c}${s}`;if(r._checkOnlyOneExistEl(i,e,t)){n.unshift(i);break}if(r._checkOnlyOneExistEl(c,e,t)){n.unshift(c);break}if(r._checkOnlyOneExistEl(s,e,t)){n.unshift(s);break}if(r._checkOnlyOneExistEl(u,e,t)){n.unshift(u);break}l=l.parentNode}return n.join(" > ")}static _getIdSelector(e){const t=r._trustedSelector(e.id);return t?`#${t}`:""}static _getClassesSelector(e){return`.${Object.values(e.classList).map(e=>(e=e.trim(),e=r._trustedSelector(e))).filter(e=>Boolean(e)).join(".")}`}static _getAttributesSelector(e){let t=Array.from(e.attributes).filter(e=>{let t=e.name,n=e.value;if(n=r._trustedSelector(n),t=r._trustedSelector(t),""===n||""===t)return!1;const l="class"!==t&&"id"!==t&&"style"!==t&&!t.startsWith("on"),o=parseInt(n).toString()!==n;return l&&o&&"href"!==t});if(t.length){return t.map(e=>`[${e.name}="${e.value}"]`).join("")}return""}static _getChildSelector(e){let t=e.previousElementSibling;const n=e.nextElementSibling;return t&&t.nodeType===Node.ELEMENT_NODE?n&&n.nodeType===Node.ELEMENT_NODE?"":":last-child":":first-child"}static _getSiblingSelector(e,t){const n=[];let l=e.previousElementSibling;for(;l&&l.nodeType===Node.ELEMENT_NODE;){let e=`${l.nodeName.toLowerCase()}${r._getIdSelector(l)}${r._getClassesSelector(l)}${r._getAttributesSelector(l)}${r._getChildSelector(l)}`;n.unshift(e);let o=n.join(" + ");if(r._isOnlyOneExistEl(o,t))return`${o} + `;l=l.previousElementSibling}return n.length?`${n.join(" + ")} + `:""}static _checkOnlyOneExistEl(e,t,n){let r=[];try{r=e&&n.document.querySelectorAll(e)}catch(e){}return 1===r.length&&r[0]===t}static _isOnlyOneExistEl(e,t){let n=[];try{n=e&&t.document.querySelectorAll(e)}catch(e){}return 1===n.length}static _isTrustedSelector(e){return!/[0-9]{3,}/.test(e)}static _trustedSelector(e){return r._isTrustedSelector(e)?e:""}}t.default=r}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9Dc3NGaW5kZXIvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vQ3NzRmluZGVyLy4vc3JjL2luZGV4LnRzIiwid2VicGFjazovL0Nzc0ZpbmRlci8uL3NyYy9Dc3NGaW5kZXIudHMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJDc3NGaW5kZXJfMSIsImRlZmF1bHQiLCJbb2JqZWN0IE9iamVjdF0iLCJlbCIsIndpbiIsIndpbmRvdyIsImZha2VWYWx1ZXMiLCJjc3MiLCJnZW5lcmF0ZVVuaXF1ZSIsInN0ciIsImZvckVhY2giLCJ2YWwiLCJyZXBsYWNlIiwiUmVnRXhwIiwiX2NsZWFyRmFrZVZhbHVlcyIsIkNzc0ZpbmRlciIsImZpbmRFbCIsIkVsZW1lbnQiLCJwYXRoIiwibm9kZVR5cGUiLCJOb2RlIiwiRUxFTUVOVF9OT0RFIiwidGFnTmFtZSIsIm5vZGVOYW1lIiwidG9Mb3dlckNhc2UiLCJpZENzcyIsIl9nZXRJZFNlbGVjdG9yIiwiY2xhc3NDc3MiLCJfZ2V0Q2xhc3Nlc1NlbGVjdG9yIiwiYXR0cmlidXRlc0NzcyIsIl9nZXRBdHRyaWJ1dGVzU2VsZWN0b3IiLCJjaGlsZFNlbGVjdG9yIiwiX2dldENoaWxkU2VsZWN0b3IiLCJjb21wbGV4Q3NzIiwiX2dldFNpYmxpbmdTZWxlY3RvciIsImxvY2FsSWRDc3MiLCJfY29uY2F0U2VsZWN0b3JzIiwiX2NoZWNrT25seU9uZUV4aXN0RWwiLCJsb2NhbENsYXNzQ3NzIiwibG9jYWxBdHRyaWJ1dGVzQ3NzIiwibG9jYWxDb21wbGV4Q3NzIiwiY3NzV2l0aFByZXZFbCIsIl9nZW5lcmF0ZVVuaXF1ZUJ5UHJldiIsInVuc2hpZnQiLCJwYXJlbnROb2RlIiwiam9pbiIsInBhdGhDc3MiLCJwcmV2RWwiLCJwcmV2aW91c0VsZW1lbnRTaWJsaW5nIiwic2VsZWN0b3JzIiwicHJldkNzcyIsIl9nZXRQcmV2VW5pcXVlIiwibmV4dEVsZW1lbnRTaWJsaW5nIiwiZmluZEVsQ3NzIiwibmV4dEVsIiwicHJldkVsQ3NzIiwiX2dlbmVyYXRlVW5pcXVlIiwic2VsZWN0b3IiLCJfdHJ1c3RlZFNlbGVjdG9yIiwiaWQiLCJ2YWx1ZXMiLCJjbGFzc0xpc3QiLCJtYXAiLCJjbGFzc05hbWUiLCJ0cmltIiwiZmlsdGVyIiwiQm9vbGVhbiIsImF0dHJpYnV0ZXMiLCJBcnJheSIsImZyb20iLCJhdHRyIiwiYXR0ck5hbWUiLCJhdHRyVmFsdWUiLCJuYW1lSXNWYWxpZCIsInN0YXJ0c1dpdGgiLCJ2YWx1ZUlzVmFsaWQiLCJwYXJzZUludCIsInRvU3RyaW5nIiwibGVuZ3RoIiwiX2lzT25seU9uZUV4aXN0RWwiLCJmaW5kRWxzIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZSIsInRlc3QiLCJfaXNUcnVzdGVkU2VsZWN0b3IiXSwibWFwcGluZ3MiOiIyQkFDQSxJQUFBQSxFQUFBLEdBR0EsU0FBQUMsRUFBQUMsR0FHQSxHQUFBRixFQUFBRSxHQUNBLE9BQUFGLEVBQUFFLEdBQUFDLFFBR0EsSUFBQUMsRUFBQUosRUFBQUUsR0FBQSxDQUNBRyxFQUFBSCxFQUNBSSxHQUFBLEVBQ0FILFFBQUEsSUFVQSxPQU5BSSxFQUFBTCxHQUFBTSxLQUFBSixFQUFBRCxRQUFBQyxJQUFBRCxRQUFBRixHQUdBRyxFQUFBRSxHQUFBLEVBR0FGLEVBQUFELFFBMERB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YUMsS0FBS0MsY0FBYyxDQUNuRCxJQUtJWSxLQUxVYyxFQUFPeEIsU0FBU0MsZ0JBQ2xCVCxFQUFVVyxlQUFlcUIsS0FDdEJoQyxFQUFVYSxvQkFBb0JtQixLQUN6QmhDLEVBQVVlLHVCQUF1QmlCLEtBQ2pDaEMsRUFBVWlCLGtCQUFrQmUsS0FFaERFLEVBQVVOLFFBQVFWLEdBQ2xCLElBQUkxQixFQUFNMEMsRUFBVUosS0FBSyxPQUN6QixHQUFJOUIsRUFBVWdFLGtCQUFrQnhFLEVBQUtILEdBQ2pDLFNBQVVHLE9BRWR3QyxFQUFTQSxFQUFPQyx1QkFFcEIsT0FBT0MsRUFBVTZCLFVBQVk3QixFQUFVSixLQUFLLFlBQWMsR0FHOUQzQyw0QkFBNEJLLEVBQWFTLEVBQWlCWixHQUN0RCxJQUFJNEUsRUFBVSxHQUNkLElBQ0lBLEVBQVV6RSxHQUFPSCxFQUFJNkUsU0FBU0MsaUJBQWlCM0UsR0FDakQsTUFBTzRFLElBQ1QsT0FBMEIsSUFBbkJILEVBQVFGLFFBQWdCRSxFQUFRLEtBQU9oRSxFQUdsRGQseUJBQXlCSyxFQUFhSCxHQUNsQyxJQUFJNEUsRUFBVSxHQUNkLElBQ0lBLEVBQVV6RSxHQUFPSCxFQUFJNkUsU0FBU0MsaUJBQWlCM0UsR0FDakQsTUFBTzRFLElBQ1QsT0FBMEIsSUFBbkJILEVBQVFGLE9BR25CNUUsMEJBQTBCdUQsR0FFdEIsT0FEa0IsWUFBWTJCLEtBQUszQixHQUl2Q3ZELHdCQUF3QnVELEdBQ3BCLE9BQUkxQyxFQUFVc0UsbUJBQW1CNUIsR0FDdEJBLEVBRUosSUFJZjNGLEVBQUFtQyxRQUFlYyIsImZpbGUiOiJpbmRleC5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAwKTtcbiIsImltcG9ydCBDc3NGaW5kZXIgZnJvbSAnLi9Dc3NGaW5kZXInO1xuLy8gaW1wb3J0IFhQYXRoRmluZGVyIGZyb20gJy4veHBhdGgtZmluZGVyJztcblxuZnVuY3Rpb24gX2NsZWFyRmFrZVZhbHVlcyhzdHI6IHN0cmluZywgZmFrZVZhbHVlczogQXJyYXk8YW55Pikge1xuICAgIGZha2VWYWx1ZXMuZm9yRWFjaCh2YWwgPT4ge1xuICAgICAgICBzdHIgPSBzdHIucmVwbGFjZShuZXcgUmVnRXhwKHZhbCwgJ2cnKSwgJycpO1xuICAgIH0pO1xuICAgIHJldHVybiBzdHI7XG59XG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgICBnZW5lcmF0ZVVuaXF1ZVNlbGVjdG9yKGVsOiBFbGVtZW50LCB3aW4gPSB3aW5kb3csIGZha2VWYWx1ZXM6IEFycmF5PGFueT4gPSBbXSkgOiBzdHJpbmcge1xuICAgICAgICBjb25zdCBjc3MgPSBDc3NGaW5kZXIuZ2VuZXJhdGVVbmlxdWUoZWwsIHdpbik7XG4gICAgICAgIGlmIChjc3MpIHtcbiAgICAgICAgICAgIHJldHVybiBfY2xlYXJGYWtlVmFsdWVzKGNzcywgZmFrZVZhbHVlcyk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gY29uc3QgeHBhdGggPSBYUGF0aEZpbmRlci5nZW5lcmF0ZVVuaXF1ZShlbCwgd2luKTtcbiAgICAgICAgLy8gaWYgKCF4cGF0aC5zdGFydHNXaXRoKCcvL2h0bWwnKSkge1xuICAgICAgICAvLyAgICAgcmV0dXJuIF9jbGVhckZha2VWYWx1ZXMoeHBhdGgsIGZha2VWYWx1ZXMpO1xuICAgICAgICAvLyB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbn0iLCJjbGFzcyBDc3NGaW5kZXIge1xuXG4gICAgc3RhdGljIGdlbmVyYXRlVW5pcXVlKGZpbmRFbDogRWxlbWVudCwgd2luOiBhbnkgPSB3aW5kb3cpIHtcbiAgICAgICAgaWYgKCEoZmluZEVsIGluc3RhbmNlb2Ygd2luLkVsZW1lbnQpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcGF0aCA9IFtdO1xuICAgICAgICBsZXQgZWwgPSBmaW5kRWw7XG4gICAgICAgIHdoaWxlIChlbC5ub2RlVHlwZSA9PT0gTm9kZS5FTEVNRU5UX05PREUpIHtcbiAgICAgICAgICAgIGxldCB0YWdOYW1lID0gZWwubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgIGxldCBpZENzcyA9IENzc0ZpbmRlci5fZ2V0SWRTZWxlY3RvcihlbCk7XG4gICAgICAgICAgICBsZXQgY2xhc3NDc3MgPSBDc3NGaW5kZXIuX2dldENsYXNzZXNTZWxlY3RvcihlbCk7XG4gICAgICAgICAgICBsZXQgYXR0cmlidXRlc0NzcyA9IENzc0ZpbmRlci5fZ2V0QXR0cmlidXRlc1NlbGVjdG9yKGVsKTtcbiAgICAgICAgICAgIGxldCBjaGlsZFNlbGVjdG9yID0gQ3NzRmluZGVyLl9nZXRDaGlsZFNlbGVjdG9yKGVsKTtcbiAgICAgICAgICAgIGxldCBzaWJsaW5nU2VsZWN0b3IgPSBDc3NGaW5kZXIuX2dldFNpYmxpbmdTZWxlY3RvcihlbCwgd2luKTtcbiAgICAgICAgICAgIGxldCBjb21wbGV4Q3NzID0gYCR7c2libGluZ1NlbGVjdG9yfSR7dGFnTmFtZX0ke2lkQ3NzfSR7Y2xhc3NDc3N9JHthdHRyaWJ1dGVzQ3NzfSR7Y2hpbGRTZWxlY3Rvcn1gO1xuICAgICAgICAgICAgbGV0IGxvY2FsSWRDc3MgPSBDc3NGaW5kZXIuX2NvbmNhdFNlbGVjdG9ycyhwYXRoLCBpZENzcyk7XG4gICAgICAgICAgICBpZiAoQ3NzRmluZGVyLl9jaGVja09ubHlPbmVFeGlzdEVsKGxvY2FsSWRDc3MsIGZpbmRFbCwgd2luKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBsb2NhbElkQ3NzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IGxvY2FsQ2xhc3NDc3MgPSBDc3NGaW5kZXIuX2NvbmNhdFNlbGVjdG9ycyhwYXRoLCBjbGFzc0Nzcyk7XG4gICAgICAgICAgICBpZiAoQ3NzRmluZGVyLl9jaGVja09ubHlPbmVFeGlzdEVsKGxvY2FsQ2xhc3NDc3MsIGZpbmRFbCwgd2luKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBsb2NhbENsYXNzQ3NzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IGxvY2FsQXR0cmlidXRlc0NzcyA9IENzc0ZpbmRlci5fY29uY2F0U2VsZWN0b3JzKHBhdGgsIGF0dHJpYnV0ZXNDc3MpO1xuICAgICAgICAgICAgaWYgKENzc0ZpbmRlci5fY2hlY2tPbmx5T25lRXhpc3RFbChsb2NhbEF0dHJpYnV0ZXNDc3MsIGZpbmRFbCwgd2luKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBsb2NhbEF0dHJpYnV0ZXNDc3M7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgbG9jYWxDb21wbGV4Q3NzID0gQ3NzRmluZGVyLl9jb25jYXRTZWxlY3RvcnMocGF0aCwgY29tcGxleENzcyk7XG4gICAgICAgICAgICBpZiAoQ3NzRmluZGVyLl9jaGVja09ubHlPbmVFeGlzdEVsKGxvY2FsQ29tcGxleENzcywgZmluZEVsLCB3aW4pKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGxvY2FsQ29tcGxleENzcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0YWdOYW1lID09PSAnYm9keScpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjc3NXaXRoUHJldkVsID0gQ3NzRmluZGVyLl9nZW5lcmF0ZVVuaXF1ZUJ5UHJldihmaW5kRWwsIHdpbik7XG4gICAgICAgICAgICAgICAgaWYgKGNzc1dpdGhQcmV2RWwpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNzc1dpdGhQcmV2RWw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcGF0aC51bnNoaWZ0KGNvbXBsZXhDc3MpO1xuICAgICAgICAgICAgZWwgPSBlbC5wYXJlbnROb2RlIGFzIEhUTUxFbGVtZW50O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwYXRoLmpvaW4oXCIgPiBcIik7XG4gICAgfVxuXG4gICAgc3RhdGljIF9jb25jYXRTZWxlY3RvcnMocGF0aDogQXJyYXk8c3RyaW5nPiwgY3NzOiBzdHJpbmcpIHtcbiAgICAgICAgbGV0IHBhdGhDc3MgPSBwYXRoLmpvaW4oXCIgPiBcIik7XG4gICAgICAgIGlmIChwYXRoQ3NzICYmIGNzcykge1xuICAgICAgICAgICAgcmV0dXJuIGAke2Nzc30gPiAke3BhdGhDc3N9YDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY3NzO1xuICAgIH1cblxuICAgIHN0YXRpYyBfZ2VuZXJhdGVVbmlxdWVCeVByZXYoZmluZEVsOiBFbGVtZW50LCB3aW46IGFueSkge1xuICAgICAgICBsZXQgcHJldkVsID0gZmluZEVsLnByZXZpb3VzRWxlbWVudFNpYmxpbmc7XG4gICAgICAgIGNvbnN0IHNlbGVjdG9ycyA9IFtdO1xuICAgICAgICB3aGlsZShwcmV2RWwgJiYgcHJldkVsLm5vZGVUeXBlID09PSBOb2RlLkVMRU1FTlRfTk9ERSkge1xuICAgICAgICAgICAgbGV0IHByZXZDc3MgPSBDc3NGaW5kZXIuX2dldFByZXZVbmlxdWUocHJldkVsLm5leHRFbGVtZW50U2libGluZywgd2luKTtcbiAgICAgICAgICAgIGlmIChwcmV2Q3NzKSB7XG4gICAgICAgICAgICAgICAgc2VsZWN0b3JzLnVuc2hpZnQocHJldkNzcyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHNlbGVjdG9ycy5qb2luKCcgKyAnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCB0YWdOYW1lID0gcHJldkVsLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICBsZXQgaWRDc3MgPSBDc3NGaW5kZXIuX2dldElkU2VsZWN0b3IocHJldkVsKTtcbiAgICAgICAgICAgIGxldCBjbGFzc0NzcyA9IENzc0ZpbmRlci5fZ2V0Q2xhc3Nlc1NlbGVjdG9yKHByZXZFbCk7XG4gICAgICAgICAgICBsZXQgYXR0cmlidXRlc0NzcyA9IENzc0ZpbmRlci5fZ2V0QXR0cmlidXRlc1NlbGVjdG9yKHByZXZFbCk7XG4gICAgICAgICAgICBjb25zdCBmaW5kRWxDc3MgPSBpZENzcyB8fCBjbGFzc0NzcyB8fCBhdHRyaWJ1dGVzQ3NzIHx8IHRhZ05hbWU7XG4gICAgICAgICAgICBzZWxlY3RvcnMudW5zaGlmdChmaW5kRWxDc3MpO1xuICAgICAgICAgICAgcHJldkVsID0gcHJldkVsLnByZXZpb3VzRWxlbWVudFNpYmxpbmc7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgc3RhdGljIF9nZXRQcmV2VW5pcXVlKG5leHRFbDogRWxlbWVudCwgd2luOiBhbnkpIHtcbiAgICAgICAgY29uc3QgcHJldkVsID0gbmV4dEVsLnByZXZpb3VzRWxlbWVudFNpYmxpbmc7XG4gICAgICAgIGlmICghcHJldkVsIHx8IHByZXZFbC5ub2RlVHlwZSAhPT0gTm9kZS5FTEVNRU5UX05PREUpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGxldCB0YWdOYW1lID0gbmV4dEVsLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIGxldCBpZENzcyA9IENzc0ZpbmRlci5fZ2V0SWRTZWxlY3RvcihuZXh0RWwpO1xuICAgICAgICBsZXQgY2xhc3NDc3MgPSBDc3NGaW5kZXIuX2dldENsYXNzZXNTZWxlY3RvcihuZXh0RWwpO1xuICAgICAgICBsZXQgYXR0cmlidXRlc0NzcyA9IENzc0ZpbmRlci5fZ2V0QXR0cmlidXRlc1NlbGVjdG9yKG5leHRFbCk7XG4gICAgICAgIGNvbnN0IGZpbmRFbENzcyA9IGlkQ3NzIHx8IGNsYXNzQ3NzIHx8IGF0dHJpYnV0ZXNDc3MgfHwgdGFnTmFtZTtcbiAgICAgICAgbGV0IHByZXZFbENzcyA9IENzc0ZpbmRlci5fZ2VuZXJhdGVVbmlxdWUocHJldkVsLCB3aW4pO1xuICAgICAgICBsZXQgY3NzID0gYCR7cHJldkVsQ3NzfSArICR7ZmluZEVsQ3NzfWA7XG4gICAgICAgIGlmIChwcmV2RWxDc3MgJiYgQ3NzRmluZGVyLl9jaGVja09ubHlPbmVFeGlzdEVsKGNzcywgbmV4dEVsLCB3aW4pKSB7XG4gICAgICAgICAgICByZXR1cm4gY3NzO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNvbXBsZXhDc3MgPSBgJHt0YWdOYW1lfSR7aWRDc3N9JHtjbGFzc0Nzc30ke2F0dHJpYnV0ZXNDc3N9YDtcbiAgICAgICAgaWYgKENzc0ZpbmRlci5fY2hlY2tPbmx5T25lRXhpc3RFbChjb21wbGV4Q3NzLCBuZXh0RWwsIHdpbikpIHtcbiAgICAgICAgICAgIHJldHVybiBjb21wbGV4Q3NzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHN0YXRpYyBfZ2VuZXJhdGVVbmlxdWUoZmluZEVsOiBFbGVtZW50LCB3aW46IGFueSkge1xuICAgICAgICBpZiAoIShmaW5kRWwgaW5zdGFuY2VvZiB3aW4uRWxlbWVudCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwYXRoID0gW107XG4gICAgICAgIGxldCBlbCA9IGZpbmRFbDtcbiAgICAgICAgd2hpbGUgKGVsLm5vZGVUeXBlID09PSBOb2RlLkVMRU1FTlRfTk9ERSkge1xuICAgICAgICAgICAgbGV0IHRhZ05hbWUgPSBlbC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgbGV0IGlkQ3NzID0gQ3NzRmluZGVyLl9nZXRJZFNlbGVjdG9yKGVsKTtcbiAgICAgICAgICAgIGxldCBjbGFzc0NzcyA9IENzc0ZpbmRlci5fZ2V0Q2xhc3Nlc1NlbGVjdG9yKGVsKTtcbiAgICAgICAgICAgIGxldCBhdHRyaWJ1dGVzQ3NzID0gQ3NzRmluZGVyLl9nZXRBdHRyaWJ1dGVzU2VsZWN0b3IoZWwpO1xuICAgICAgICAgICAgbGV0IGNvbXBsZXhDc3MgPSBgJHt0YWdOYW1lfSR7aWRDc3N9JHtjbGFzc0Nzc30ke2F0dHJpYnV0ZXNDc3N9YDtcbiAgICAgICAgICAgIGlmIChDc3NGaW5kZXIuX2NoZWNrT25seU9uZUV4aXN0RWwoaWRDc3MsIGZpbmRFbCwgd2luKSkge1xuICAgICAgICAgICAgICAgIHBhdGgudW5zaGlmdChpZENzcyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoQ3NzRmluZGVyLl9jaGVja09ubHlPbmVFeGlzdEVsKGNsYXNzQ3NzLCBmaW5kRWwsIHdpbikpIHtcbiAgICAgICAgICAgICAgICBwYXRoLnVuc2hpZnQoY2xhc3NDc3MpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKENzc0ZpbmRlci5fY2hlY2tPbmx5T25lRXhpc3RFbChhdHRyaWJ1dGVzQ3NzLCBmaW5kRWwsIHdpbikpIHtcbiAgICAgICAgICAgICAgICBwYXRoLnVuc2hpZnQoYXR0cmlidXRlc0Nzcyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoQ3NzRmluZGVyLl9jaGVja09ubHlPbmVFeGlzdEVsKGNvbXBsZXhDc3MsIGZpbmRFbCwgd2luKSkge1xuICAgICAgICAgICAgICAgIHBhdGgudW5zaGlmdChjb21wbGV4Q3NzKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsID0gZWwucGFyZW50Tm9kZSBhcyBFbGVtZW50O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwYXRoLmpvaW4oXCIgPiBcIik7XG4gICAgfVxuXG4gICAgc3RhdGljIF9nZXRJZFNlbGVjdG9yKGVsOiBFbGVtZW50KSB7XG4gICAgICAgIGNvbnN0IHNlbGVjdG9yID0gQ3NzRmluZGVyLl90cnVzdGVkU2VsZWN0b3IoZWwuaWQpO1xuICAgICAgICBpZiAoc2VsZWN0b3IpIHtcbiAgICAgICAgICAgIHJldHVybiBgIyR7c2VsZWN0b3J9YFxuICAgICAgICB9XG4gICAgICAgIHJldHVybiAnJztcbiAgICB9XG5cbiAgICBzdGF0aWMgX2dldENsYXNzZXNTZWxlY3RvcihlbDogRWxlbWVudCkge1xuICAgICAgICBjb25zdCBjbGFzc2VzID0gT2JqZWN0LnZhbHVlcyhlbC5jbGFzc0xpc3QpXG4gICAgICAgICAgICAubWFwKGNsYXNzTmFtZSA9PiB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lID0gY2xhc3NOYW1lLnRyaW0oKTtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWUgPSBDc3NGaW5kZXIuX3RydXN0ZWRTZWxlY3RvcihjbGFzc05hbWUpO1xuICAgICAgICAgICAgICAgIHJldHVybiBjbGFzc05hbWU7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmZpbHRlcihjbGFzc05hbWUgPT4gQm9vbGVhbihjbGFzc05hbWUpKTtcbiAgICAgICAgcmV0dXJuIGAuJHtjbGFzc2VzLmpvaW4oJy4nKX1gO1xuICAgIH1cblxuICAgIHN0YXRpYyBfZ2V0QXR0cmlidXRlc1NlbGVjdG9yKGVsOiBFbGVtZW50KSB7XG4gICAgICAgIGxldCBhdHRyaWJ1dGVzID0gQXJyYXkuZnJvbShlbC5hdHRyaWJ1dGVzKVxuICAgICAgICAgICAgLmZpbHRlcihhdHRyID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgYXR0ck5hbWUgPSBhdHRyLm5hbWU7XG4gICAgICAgICAgICAgICAgbGV0IGF0dHJWYWx1ZSA9IGF0dHIudmFsdWU7XG4gICAgICAgICAgICAgICAgYXR0clZhbHVlID0gQ3NzRmluZGVyLl90cnVzdGVkU2VsZWN0b3IoYXR0clZhbHVlKTtcbiAgICAgICAgICAgICAgICBhdHRyTmFtZSA9IENzc0ZpbmRlci5fdHJ1c3RlZFNlbGVjdG9yKGF0dHJOYW1lKTtcbiAgICAgICAgICAgICAgICBpZiAoYXR0clZhbHVlID09PSAnJyB8fCBhdHRyTmFtZSA9PT0gJycpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBuYW1lSXNWYWxpZCA9IGF0dHJOYW1lICE9PSAnY2xhc3MnXG4gICAgICAgICAgICAgICAgICAgICYmIGF0dHJOYW1lICE9PSAnaWQnXG4gICAgICAgICAgICAgICAgICAgICYmIGF0dHJOYW1lICE9PSAnc3R5bGUnXG4gICAgICAgICAgICAgICAgICAgICYmICFhdHRyTmFtZS5zdGFydHNXaXRoKCdvbicpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlSXNWYWxpZCA9IHBhcnNlSW50KGF0dHJWYWx1ZSkudG9TdHJpbmcoKSAhPT0gYXR0clZhbHVlO1xuICAgICAgICAgICAgICAgIHJldHVybiBuYW1lSXNWYWxpZCAmJiB2YWx1ZUlzVmFsaWQgJiYgYXR0ck5hbWUgIT09ICdocmVmJztcbiAgICAgICAgICAgIH0pO1xuICAgICAgICBpZiAoYXR0cmlidXRlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGxldCB0ZW1wbGF0ZXMgPSBhdHRyaWJ1dGVzLm1hcChhdHRyID0+IGBbJHthdHRyLm5hbWV9PVwiJHthdHRyLnZhbHVlfVwiXWApO1xuICAgICAgICAgICAgcmV0dXJuIHRlbXBsYXRlcy5qb2luKCcnKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gJyc7XG4gICAgfVxuXG4gICAgc3RhdGljIF9nZXRDaGlsZFNlbGVjdG9yKGVsOiBFbGVtZW50KSB7XG4gICAgICAgIGxldCBwcmV2RWwgPSBlbC5wcmV2aW91c0VsZW1lbnRTaWJsaW5nO1xuICAgICAgICBjb25zdCBuZXh0RWwgPSBlbC5uZXh0RWxlbWVudFNpYmxpbmc7XG4gICAgICAgIGlmICghcHJldkVsIHx8IHByZXZFbC5ub2RlVHlwZSAhPT0gTm9kZS5FTEVNRU5UX05PREUpIHtcbiAgICAgICAgICAgIHJldHVybiAnOmZpcnN0LWNoaWxkJztcbiAgICAgICAgfVxuICAgICAgICBpZiAoIW5leHRFbCB8fCBuZXh0RWwubm9kZVR5cGUgIT09IE5vZGUuRUxFTUVOVF9OT0RFKSB7XG4gICAgICAgICAgICByZXR1cm4gJzpsYXN0LWNoaWxkJztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gJyc7XG4gICAgfVxuXG4gICAgc3RhdGljIF9nZXRTaWJsaW5nU2VsZWN0b3IoZWw6IEVsZW1lbnQsIHdpbjogYW55KSB7XG4gICAgICAgIGNvbnN0IHNlbGVjdG9ycyA9IFtdO1xuICAgICAgICBsZXQgcHJldkVsID0gZWwucHJldmlvdXNFbGVtZW50U2libGluZztcbiAgICAgICAgd2hpbGUocHJldkVsICYmIHByZXZFbC5ub2RlVHlwZSA9PT0gTm9kZS5FTEVNRU5UX05PREUpIHtcbiAgICAgICAgICAgIGxldCB0YWdOYW1lID0gcHJldkVsLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICBsZXQgaWRDc3MgPSBDc3NGaW5kZXIuX2dldElkU2VsZWN0b3IocHJldkVsKTtcbiAgICAgICAgICAgIGxldCBjbGFzc0NzcyA9IENzc0ZpbmRlci5fZ2V0Q2xhc3Nlc1NlbGVjdG9yKHByZXZFbCk7XG4gICAgICAgICAgICBsZXQgYXR0cmlidXRlc0NzcyA9IENzc0ZpbmRlci5fZ2V0QXR0cmlidXRlc1NlbGVjdG9yKHByZXZFbCk7XG4gICAgICAgICAgICBsZXQgY2hpbGRTZWxlY3RvciA9IENzc0ZpbmRlci5fZ2V0Q2hpbGRTZWxlY3RvcihwcmV2RWwpO1xuICAgICAgICAgICAgbGV0IGNvbXBsZXhDc3MgPSBgJHt0YWdOYW1lfSR7aWRDc3N9JHtjbGFzc0Nzc30ke2F0dHJpYnV0ZXNDc3N9JHtjaGlsZFNlbGVjdG9yfWA7XG4gICAgICAgICAgICBzZWxlY3RvcnMudW5zaGlmdChjb21wbGV4Q3NzKTtcbiAgICAgICAgICAgIGxldCBjc3MgPSBzZWxlY3RvcnMuam9pbignICsgJyk7XG4gICAgICAgICAgICBpZiAoQ3NzRmluZGVyLl9pc09ubHlPbmVFeGlzdEVsKGNzcywgd2luKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBgJHtjc3N9ICsgYDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHByZXZFbCA9IHByZXZFbC5wcmV2aW91c0VsZW1lbnRTaWJsaW5nO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzZWxlY3RvcnMubGVuZ3RoID8gYCR7c2VsZWN0b3JzLmpvaW4oJyArICcpfSArIGAgOiAnJztcbiAgICB9XG5cbiAgICBzdGF0aWMgX2NoZWNrT25seU9uZUV4aXN0RWwoY3NzOiBzdHJpbmcsIGZpbmRFbDogRWxlbWVudCwgd2luOiBhbnkpIHtcbiAgICAgICAgbGV0IGZpbmRFbHMgPSBbXTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGZpbmRFbHMgPSBjc3MgJiYgd2luLmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoY3NzKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge31cbiAgICAgICAgcmV0dXJuIGZpbmRFbHMubGVuZ3RoID09PSAxICYmIGZpbmRFbHNbMF0gPT09IGZpbmRFbDtcbiAgICB9XG5cbiAgICBzdGF0aWMgX2lzT25seU9uZUV4aXN0RWwoY3NzOiBzdHJpbmcsIHdpbjogYW55KSB7XG4gICAgICAgIGxldCBmaW5kRWxzID0gW107XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBmaW5kRWxzID0gY3NzICYmIHdpbi5kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGNzcyk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHt9XG4gICAgICAgIHJldHVybiBmaW5kRWxzLmxlbmd0aCA9PT0gMTtcbiAgICB9XG5cbiAgICBzdGF0aWMgX2lzVHJ1c3RlZFNlbGVjdG9yKHNlbGVjdG9yOiBzdHJpbmcpIHtcbiAgICAgICAgY29uc3QgaGFzTnVtYmVyID0gL1swLTldezMsfS8udGVzdChzZWxlY3Rvcik7XG4gICAgICAgIHJldHVybiAhaGFzTnVtYmVyO1xuICAgIH1cblxuICAgIHN0YXRpYyBfdHJ1c3RlZFNlbGVjdG9yKHNlbGVjdG9yOiBzdHJpbmcpIHtcbiAgICAgICAgaWYgKENzc0ZpbmRlci5faXNUcnVzdGVkU2VsZWN0b3Ioc2VsZWN0b3IpKSB7XG4gICAgICAgICAgICByZXR1cm4gc2VsZWN0b3I7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICcnO1xuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQ3NzRmluZGVyO1xuIl0sInNvdXJjZVJvb3QiOiIifQ==